{% extends "base.html" %}
{% load static %}
{% block css %}
    <link rel="stylesheet" href="{% static 'assets/css/fonts.css' %}">
    <link rel="stylesheet" href="{% static 'taskflow/css/meeting_detail.css' %}">
{% endblock %}
{% block content %}
<div class="taskflow-container">
    <div class="meeting-detail-container" dir="rtl">
        <div class="meeting-header">
            <h1>{{ meeting.title }}</h1>
            <div class="meeting-meta">
                <div class="meta-item">
                    <i class="fa fa-calendar-alt"></i>
                    <span>تاریخ: {{ meeting.date|default:'-' }}</span>
                </div>
                <div class="meta-item">
                    <i class="fa fa-clock"></i>
                    <span>مدت زمان: {{ meeting.duration }} دقیقه</span>
                </div>
                <div class="meta-item">
                    <i class="fa fa-map-marker-alt"></i>
                    <span>مکان: {{ meeting.location|default:'-' }}</span>
                </div>
                {% if meeting.project %}
                <div class="meta-item">
                    <i class="fa fa-project-diagram"></i>
                    <span>پروژه: {{ meeting.project.title }}</span>
                </div>
                {% endif %}
            </div>
            <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                <a href="{% url 'taskflow:meeting_update' meeting.pk %}" class="btn btn-warning">ویرایش جلسه</a>
                <a href="{% url 'taskflow:meeting_delete' meeting.pk %}" class="btn btn-danger" onclick="return confirm('آیا از حذف جلسه مطمئن هستید؟');">حذف جلسه</a>
            </div>
            <div style="margin-top:1rem;">
                <strong>یادداشت‌ها:</strong>
                <div>{{ meeting.notes|default:'-' }}</div>
            </div>
            <div style="margin-top:1rem;">
                <strong>شرکت‌کنندگان:</strong>
                {% for user in meeting.participants.all %}
                    <span style="margin-left:0.5rem;">{{ user.f_name}} {{ user.l_name }}</span>
                {% empty %}
                    <span>-</span>
                {% endfor %}
            </div>
        </div>

        <div class="tasks-section" style="margin-top:2rem;">
            <h3>تسک‌های این جلسه</h3>
            {% if tasks %}
                <ul class="tasks-list">
                    {% for task in tasks %}
                    <li class="task-item">
                        <div><strong>{{ task.title }}</strong></div>
                        <div>{{ task.description }}</div>
                        <div>
                            <span class="task-status status-{{ task.status }}">{{ task.get_status_display }}</span>
                            {% if task.due_date %}
                            <span style="margin-right:1rem; color:#666;">
                                <i class="fas fa-clock"></i> تاریخ سررسید: {{ task.due_date }}
                            </span>
                            {% endif %}
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div style="color:#888; text-align:center; padding:1rem;">
                    <i class="fas fa-info-circle"></i> تسکی برای این جلسه ثبت نشده است.
                </div>
            {% endif %}
        </div>
    </div>
</div>


{% endblock %} 